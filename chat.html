<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI 聊天</title> <!-- 页面标题保留 -->

    <!-- 引入 n8n chat 的 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/@n8n/chat/dist/style.css" rel="stylesheet" />

    <!-- 引入 Google Fonts 或其他字体，以保持风格一致 -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

        <style>
        /* 设置整个页面的背景和字体，并使用 flexbox 居中 */
        html, body {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden; /* 隐藏滚动条，让聊天组件自己处理滚动 */
            font-family: 'Inter', sans-serif; /* 使用相同的字体 */
            background-color: #f0f2f5; /* 设置一个非常浅的灰色背景 */
            color: #333; /* 设置默认文本颜色 */
            display: flex; /* 使用 flex 布局来居中内容 */
            justify-content: center; /* 水平居中外层容器 */
            align-items: center; /* 垂直居中外层容器 */
            min-height: 100vh; /* 确保 body 至少占满整个视口高度 */
        }

        /* 外部容器，用于限制聊天窗口的尺寸并添加阴影 */
        #chat-wrapper {
            width: 95%; /* 允许一些弹性 */
            max-width: 800px; /* 设置一个最大宽度 */
            height: 90%; /* 设置一个高度 */
            max-height: 700px; /* 也可以设置最大高度 */
            background-color: #ffffff; /* 设置主聊天区域的白色背景 */
            border-radius: 15px; /* 设置外层圆角 */
            overflow: hidden; /* 隐藏超出容器的内容 */
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1); /* 添加一个阴影 */
            display: flex; /* 使其成为 flex 容器 */
            flex-direction: column; /* 子元素垂直排列 */
            box-sizing: border-box; /* 确保 padding 不会增加总尺寸 */
            /* padding: 20px; /* Removing wrapper padding, will add padding to message area and input area instead */
            position: relative; /* Add relative positioning */
        }

        /* 自定义标题样式 - 匹配图一的样式 */
        .custom-header {
            text-align: center; /* 文本居中 */
            font-size: 1.5em; /* Adjusted slightly smaller than 2em to better match image */
            font-weight: 600; /* 加粗 */
            color: #333; /* 文字颜色 */
            margin-bottom: 20px; /* 标题下方留白 */
            padding: 20px 20px 0 20px; /* Add padding to match the wrapper idea */
            flex-shrink: 0; /* 确保标题不会被压缩 */
            box-sizing: border-box;
        }

        /* This is the container where the chat interface will be embedded */
        /* In fullscreen mode, this container will fill the remaining space of its parent */
        #my-chat-container {
            width: 100%;
            flex-grow: 1; /* Let it take up the remaining space in the flex container */
            position: relative; /* Needed for fullscreen mode potentially */
            /* background-color: #f9f9f9; /* Can give the message area a slightly lighter background */
             display: flex; /* Make the container itself a flex container */
             flex-direction: column; /* Arrange internal elements (like messages and input) vertically */
        }

        /* Override n8n chat internal CSS variables to change appearance */
        /* Apply variables within #my-chat-container */
       #my-chat-container {
            /* Header style - We use a custom header, so hide the component's header */
            --chat--header-height: 0px;
            --chat--header--padding: 0;
            --chat--header--border-bottom: none;

            /* Message bubble styles */
            --chat--message--bot--background: #ffffff; /* Robot message background (white) */
            --chat--message--bot--color: #333; /* Robot message text color */
            --chat--message--bot--border: 1px solid #e9ecef; /* Optional: subtle border */
            --chat--message--user--background: #007bff; /* User message background (blue) */
            --chat--message--user--color: #ffffff; /* User message text color (white for contrast) */
            --chat--message--user--border: none; /* No border for user message */
            --chat--border-radius: 18px; /* Increased message bubble border-radius for a softer look */
            --chat--message--padding: 0.8rem 1.2rem; /* Message internal padding */
            --chat--message-line-height: 1.6; /* Line height */
            --chat--spacing: 1rem; /* Base spacing */


            /* Input box style */
            /* Overall input area style (includes input field and send button) */
            --chat--input-area-background: #ffffff; /* Input area background (white) */
            --chat--input-area-padding: 1rem 1.5rem; /* Add padding to input area */
            --chat--input-area-border-top: 1px solid #e9ecef; /* Subtle border above input area */
            --chat--input-area-box-shadow: none; /* Remove shadow if any */


            /* Input field itself */
            --chat--input-background: transparent; /* Input field background transparent */
            --chat--input-color: #333; /* Input field text color */
            --chat--input-padding: 0.5rem 0; /* Add some vertical padding inside input */
            --chat--input-border-radius: 0; /* Input field itself doesn't need border-radius */
            --chat--input-border: none; /* Remove border */
            --chat--input-box-shadow: none; /* Remove shadow */
            --chat--textarea--height: 50px; /* Input box height */

             /* Send button style (you might need to inspect to target correctly) */
             /* Using the provided image, the send button is a simple icon */
             /* The default style might be sufficient, but you could target it like: */
             /* #my-chat-container .n8n-chat-input-area button { ... } */


            /* Other colors and variables - Keep relevant ones */
            --chat--color-primary: #007bff; /* Blue */
            --chat--color-secondary: #6c757d; /* Gray */
            --chat--color-white: #ffffff; /* White */
            --chat--color-light: #e9ecef; /* Light gray */
            --chat--color-medium: #adb5bd; /* Medium gray */
            --chat--color-dark: #333; /* Dark gray */
            --chat--color-typing: #555; /* Typing indicator color */

       }

        /* === Custom CSS rules to fix alignment and padding === */
        /* !! IMPORTANT !! You MUST inspect the actual DOM generated by n8n chat */
        /* Use browser developer tools (F12) to find the class names for: */
        /* 1. The container holding all messages (e.g., .n8n-chat-messages) */
        /* 2. An individual message element (e.g., .n8n-chat-message) */
        /* 3. A user message element (e.g., .n8n-chat-message--user) */
        /* 4. A bot message element (e.g., .n8n-chat-message--bot) */
         /* 5. The element INSIDE the message that wraps the text content (e.g., Look for a div or span directly inside the message bubble) */
        /* The class names below are ASSUMPTIONS. Adjust if necessary. */

        /* Style the message list container */
        /* This container should handle scrolling and overall message padding */
        #my-chat-container .n8n-chat-messages { /* ASSUMED class name */
             padding: 15px 20px; /* Add left/right padding, and some top/bottom */
             overflow-y: auto; /* Ensure message list is scrollable */
             flex-grow: 1; /* Let it occupy the remaining space */
             display: flex; /* Make it a flex container */
             flex-direction: column; /* Stack messages vertically */
             /* Remove any default padding if it conflicts: padding: 0 !important; */
        }

         /* Style individual message elements */
         #my-chat-container .n8n-chat-message { /* ASSUMED class name */
             max-width: 80%; /* Limit bubble width */
             margin-bottom: 12px; /* Space between messages */
             /* Removed display: flex from here as it might interfere with text-align on the parent */
         }

        /* Align USER messages to the RIGHT */
        #my-chat-container .n8n-chat-message--user { /* ASSUMED class name for user bubble */
             margin-left: auto !important; /* Pushes the whole bubble to the right */
             margin-right: 0 !important;
             align-self: flex-end !important; /* Also helps align the bubble itself */
             /* Adjust bubble shape specific to user message */
             border-top-right-radius: var(--chat--border-radius, 18px); /* Sharp corner top-right */
             border-top-left-radius: var(--chat--border-radius, 18px); /* Soft top-left */
             border-bottom-left-radius: var(--chat--border-radius, 18px); /* Soft bottom-left */
             border-bottom-right-radius: 4px; /* Soft bottom-right */

             /* **Attempt 1: Align text content by setting text-align on the bubble container** */
             text-align: right !important;
        }

        /* Align BOT messages to the LEFT (default behavior) */
        #my-chat-container .n8n-chat-message--bot { /* ASSUMED class name for bot bubble */
             margin-right: auto !important; /* Pushes the whole bubble to the left */
             margin-left: 0 !important;
             align-self: flex-start !important; /* Also helps align the bubble itself */
             /* Adjust bubble shape specific to bot message */
             border-top-left-radius: var(--chat--border-radius, 18px); /* Sharp corner top-left */
             border-top-right-radius: var(--chat--border-radius, 18px); /* Soft top-right */
             border-bottom-left-radius: 4px; /* Soft bottom-left */
             border-bottom-right-radius: var(--chat--border-radius, 18px); /* Soft bottom-right */

              /* **Attempt 1: Align text content by setting text-align on the bubble container** */
             text-align: left !important; /* (Usually default, but explicit is fine) */
        }

        /* **Attempt 2: Refine text alignment by targeting potential inner content elements** */
        /* Target common inner container elements directly within the message bubble */
        /* You need to verify these class names or element types with F12 */
        #my-chat-container .n8n-chat-message--user .n8n-chat-message-content, /* Assumed class from docs/examples */
        #my-chat-container .n8n-chat-message--user > div, /* Common: direct div child */
        #my-chat-container .n8n-chat-message--user > span /* Common: direct span child */
        {
            text-align: right !important; /* **Force text alignment to the right** */
            /* If the text is still left, check for inline styles or other conflicting rules in F12 */
            /* width: 100%; /* Ensure the inner element takes full width if needed */
             /* If the text is wrapping unexpectedly, this might help */
            word-break: break-word; /* Prevents long words from overflowing */
            overflow-wrap: break-word; /* Also helps with breaking long text */
        }

        #my-chat-container .n8n-chat-message--bot .n8n-chat-message-content, /* Assumed class */
        #my-chat-container .n8n-chat-message--bot > div, /* Direct div child */
        #my-chat-container .n8n-chat-message--bot > span /* Direct span child */
        {
            text-align: left !important; /* **Force text alignment to the left** */
             /* width: 100%; */
             word-break: break-word;
             overflow-wrap: break-word;
        }


        /* Style the input area - this contains the text input and the send button */
        #my-chat-container .n8n-chat-input-area { /* ASSUMED class name */
            display: flex; /* Use flexbox to lay out input and button */
            align-items: center; /* Vertically align input and button */
            gap: 10px; /* Space between input and button */
            padding: 10px 20px; /* Add padding to match message area sides */
            flex-shrink: 0; /* Prevent input area from shrinking */
        }

         /* Style the input field itself within the input area */
        #my-chat-container .n8n-chat-input { /* ASSUMED class name */
            flex-grow: 1; /* Input field takes up available space */
            /* Add any specific input styles here */
        }

        /* Style the send button within the input area */
        /* #my-chat-container .n8n-chat-send-button { /* ASSUMED class name */
            /* Customize button appearance here if needed */
        /* } */


    </style>
</head>
<body>

    <!-- External container for centering and sizing -->
    <div id="chat-wrapper">
        <!-- Custom Header - Modified text based on image -->
        <div class="custom-header">
            Hi, How can I help you today?
        </div>

        <!-- This is the container where the chat interface will be embedded -->
        <!-- In fullscreen mode, this container fills the remaining space of the flex parent -->
        <div id="my-chat-container">
            <!-- n8n chat content will be automatically added here by the script -->
        </div>
    </div>


    <!-- Include n8n chat JavaScript script -->
    <!-- Place before the closing body tag to ensure the container div exists -->
    <script type="module">
	    import { createChat } from 'https://cdn.jsdelivr.net/npm/@n8n/chat/dist/chat.bundle.es.js';

	    createChat({
		    webhookUrl: 'https://ca40-140-82-8-246.ngrok-free.app/webhook/46391514-35d5-4213-a31a-c7d1a9f773e4/chat', // Replace with your actual URL
		    target: '#my-chat-container', // Point to this container's ID
       		mode: 'fullscreen', // Use fullscreen mode to make it fill the parent container #my-chat-container's remaining space
            // Adjust options based on the target image and requirements
            initialMessages: [], // Clear initial messages as we use a custom header
            showWelcomeScreen: false, // Do not show the welcome screen button
            defaultLanguage: 'en', // Still need to set to 'en' for the config keys
            i18n: { // Override some text
                 en: { // Keep 'en' as the key based on documentation
                     title: '', // Clear default title
                     subtitle: '', // Clear default subtitle
                     footer: '', /* Remove footer */
                     getStarted: '', /* Remove welcome screen "Get Started" text */
                     // Set input box placeholder to Chinese based on the image
                     inputPlaceholder: '和AI聊聊。。。',
                 }
            },
             // Optional: Add any initial chat messages here if desired, but the image doesn't show them initially
            // initialMessages: ['你好！有什么可以帮您的吗?'], // Example initial bot message
	    });
    </script>

</body>
</html>
